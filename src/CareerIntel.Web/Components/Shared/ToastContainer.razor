@implements IDisposable
@inject ToastService Toast

<div class="toast-container" aria-live="polite" role="status">
    @foreach (var item in Toast.Toasts)
    {
        <div class="toast toast-@item.Type.ToString().ToLowerInvariant()">
            <span class="toast-icon" aria-hidden="true">@GetIcon(item.Type)</span>
            <span class="toast-message">@item.Message</span>
            <button class="toast-dismiss" @onclick="() => Toast.Dismiss(item.Id)" aria-label="Dismiss">&times;</button>
        </div>
    }
</div>

@code {
    protected override void OnInitialized()
    {
        Toast.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        Toast.OnChange -= StateHasChanged;
    }

    private static string GetIcon(ToastType type) => type switch
    {
        ToastType.Success => "✓",
        ToastType.Error => "✕",
        ToastType.Warning => "⚠",
        _ => "ℹ"
    };
}
